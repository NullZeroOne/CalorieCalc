
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Game of Life PRD — Complete</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; line-height: 1.55; margin: 2rem; color:#111; }
  h1, h2, h3 { margin-top:1.2em; }
  code, pre { background:#f6f8fa; padding:0.2rem 0.4rem; border-radius:4px; }
  pre { overflow-x:auto; white-space:pre-wrap; }
  ul, ol { margin:0.4rem 0 0.6rem 1.4rem; }
  table { border-collapse: collapse; width:100%; margin:1rem 0; }
  th, td { border:1px solid #ddd; padding:0.5rem; text-align:left; vertical-align:top; }
  th { background:#f3f4f6; }
  .note { background:#fff8e6; border:1px solid #ffe8b3; padding:0.8rem 1rem; border-radius:8px; }
</style>
</head>
<body>
<h1>Product Requirements Document (PRD)<br>Conway’s Game of Life — Extended Web App</h1>

<h2>Table of Contents</h2>
<ol>
  <li>Overview</li>
  <li>UI / Controls</li>
  <li>Gameplay Features</li>
  <li>Algorithms & Pseudocode</li>
  <li>Diagnostics</li>
  <li>Presets Feature</li>
  <li>Appendix A: Small & Classic Patterns</li>
  <li>Appendix B: Large Guns (Embedded Canonical RLEs)</li>
</ol>

<h2>1. Overview</h2>
<p>This project implements an extended, web-based version of Conway’s Game of Life. It runs entirely in the browser as a self-contained HTML/JS app. Key extensions include rainbow mode, trends visualization, aging with birth rate and rebalancing, fill tools, presets, history navigation, and diagnostics.</p>

<h2>2. UI / Controls</h2>
<ul>
  <li>Controls: ▶️ Play, ⏸️ Pause, ⬅️ Step Back, ➡️ Step Forward, Clear.</li>
  <li>Block Size input (default 15 px) with Resize button (center-anchored preservation).</li>
  <li>Fill % input (default 10) with color picker button. Fill grid: 3×3 arrows + Quarters button.</li>
  <li>Options (arranged in rows):<br>
    • Toroidal (default true)<br>
    • Rainbow / Trends<br>
    • Aging / Birth Rate (default 2)<br>
    • PopRebal / Threshold % (default 5)</li>
  <li>History buffer size (default 20).</li>
  <li>Presets button (modal popup).</li>
</ul>

<h2>3. Gameplay Features</h2>
<ul>
  <li>History of up to N generations, with step-back/forward navigation. Clear clears history.</li>
  <li>Fill operation adds live cells non-destructively in chosen region.</li>
  <li>Initial load: R-pentomino centered.</li>
  <li>Rainbow mode: new births average neighbor colors; aging spawns use neighbor color or parent if isolated.</li>
  <li>Trends: gradient from white→blue→teal→green→yellow→red, based on fraction of history alive.</li>
  <li>Aging: cells alive for entire history die and spawn BR new cells (radially placed). With PopRebal, spawn count depends on population relative to Fill% ± Threshold.</li>
  <li>Population Rebalancing: when enabled with Aging, adjusts spawn count rules (low → BR+1, high → BR-1, else BR).</li>
  <li>Toroidal wrap-around supported (default true).</li>
  <li>Keyboard shortcuts: Space (Play/Pause), ← (Step Back), → (Step Forward).</li>
</ul>

<h2>4. Algorithms & Pseudocode</h2>
<h3>Step function (simplified pseudocode)</h3>
<pre>
for each cell:
  count neighbors (toroidal if enabled)
  apply survival/birth rules:
    - normal: survive if n=2 or 3, birth if n=3
    - with PopRebal: low → birth if 2 or 3, high → survival only if n>=3
  assign new color:
    - rainbow: average of neighbors
    - normal: fill color
apply aging:
  for each cell alive for full history:
    kill it
    spawn BR new cells (adjusted if PopRebal)
    place spawns radially outward until empty cells found
    assign colors from neighbors or inherit parent
</pre>

<h2>5. Diagnostics</h2>
<p>Displayed in a compact panel:</p>
<pre>
FPS: 0.0 | Gen: 0
Alive: 0 (0.0%)
Size: 0×0
History: 0/20
</pre>

<h2>6. Presets Feature</h2>
<ul>
  <li>Presets modal shows pattern cards with name, type, description, source.</li>
  <li>Loading clears board & history, places pattern centered, and checkpoints.</li>
  <li>Supports both small hard-coded coords and large RLE-defined patterns.</li>
</ul>

<h2>7. Appendix A: Small & Classic Patterns</h2>
<p>Includes still lifes (Block, Beehive, Loaf, Boat), oscillators (Blinker, Toad, Beacon, Pulsar, Pentadecathlon), spaceships (Glider, LWSS, MWSS, HWSS), guns (Gosper Glider Gun, Two-Gun), and methuselahs (R-pentomino, Diehard, Acorn).</p>
<p>Each small pattern is defined either via explicit coordinates or short inline RLE. These are embedded directly in the app.</p>

<h2>8. Appendix B: Large Guns (Embedded Canonical RLEs)</h2>
<p>The following guns are included with canonical sources. Their full RLE definitions must be <strong>embedded directly into the single-file HTML app</strong>, not loaded externally. This ensures the app remains a standalone offline file. Attribution and licensing details are kept in a separate <code>CREDITS.md</code> file, referencing LifeWiki, authors, and GFDL 1.2.</p>

<table>
  <thead>
    <tr><th>Name</th><th>Period</th><th>Wiki page</th><th>RLE file</th><th>Header excerpt</th></tr>
  </thead>
  <tbody>
    <tr><td><strong>AK-94</strong></td><td>94</td>
      <td><a href="https://conwaylife.com/wiki/AK-94">LifeWiki: AK-94</a></td>
      <td><a href="https://conwaylife.com/patterns/ak94.rle">ak94.rle</a></td>
      <td><code>#N AK-94 · #O Mike Playle · rule=B3/S23</code></td></tr>

    <tr><td><strong>gun132</strong></td><td>132</td>
      <td><a href="https://conwaylife.com/wiki/4g-to-5g_reaction">LifeWiki: 4g-to-5g reaction</a></td>
      <td><a href="https://conwaylife.com/patterns/gun132.rle">gun132.rle</a></td>
      <td><code>#N gun132 · rule=B3/S23</code></td></tr>

    <tr><td><strong>Gunstar 2</strong></td><td>168</td>
      <td><a href="https://conwaylife.com/wiki/Gunstar_2">LifeWiki: Gunstar 2</a></td>
      <td><a href="https://conwaylife.com/patterns/gunstar2.rle">gunstar2.rle</a></td>
      <td><code>#N Gunstar 2 · #O David Buckingham · rule=B3/S23</code></td></tr>

    <tr><td><strong>Maximum Volatility Gun</strong></td><td>177</td>
      <td><a href="https://conwaylife.com/wiki/Maximum_volatility_gun">LifeWiki: Maximum volatility gun</a></td>
      <td><a href="https://conwaylife.com/patterns/maximumvolatilitygun.rle">maximumvolatilitygun.rle</a></td>
      <td><code>#N maximumvolatilitygun · rule=B3/S23</code></td></tr>

    <tr><td><strong>Two-Gun</strong> (p60)</td><td>60</td>
      <td><a href="https://conwaylife.com/wiki/Gosper_glider_gun#Gallery">LifeWiki: Gosper gun gallery</a></td>
      <td><a href="https://conwaylife.com/patterns/twogun.rle">twogun.rle</a></td>
      <td><code>#N twogun · rule=B3/S23</code></td></tr>

    <tr><td><strong>Simkin Glider Gun</strong></td><td>120</td>
      <td><a href="https://conwaylife.com/wiki/Simkin_glider_gun">LifeWiki: Simkin glider gun</a></td>
      <td><a href="https://conwaylife.com/patterns/simkinglidergun.rle">simkinglidergun.rle</a></td>
      <td><code>#N simkinglidergun · rule=B3/S23</code></td></tr>
  </tbody>
</table>

<div class="note"><strong>Implementation:</strong> Each RLE above will be pasted into the single HTML file as a string constant and parsed by the presets loader. A separate <code>CREDITS.md</code> will contain attribution (authors, LifeWiki) under GFDL 1.2. This ensures the app runs entirely offline as a standalone file.</div>

</body>
</html>
