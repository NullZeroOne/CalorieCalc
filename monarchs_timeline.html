<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Monarchs of England & Britain — Timeline</title>
  <style>
    :root{
      --sidebar-w: 160px;
      --page-h: 2200px; /* Tall page so the timeline breathes; adjust as needed */
      --min-reign-h: 40px; /* ensure at least two small text lines fit */
      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: var(--font);
      background: #f7f7f8;
      color: #111;
    }
    .app {
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      min-height: 100vh;
    }
    header {
      grid-column: 1 / -1;
      padding: 12px 16px;
      background: #fff;
      border-bottom: 1px solid #e8e8ee;
      position: sticky;
      top: 0;
      z-index: 2;
    }
    header h1 {
      font-size: 18px;
      margin: 0 0 4px 0;
      font-weight: 700;
      letter-spacing: 0.2px;
    }
    header p {
      margin: 0;
      font-size: 12px;
      color: #555;
    }
    /* Left timeline column */
    .timeline-wrap {
      background: #fff;
      border-right: 1px solid #e8e8ee;
      padding: 8px 8px 24px 8px;
      position: relative;
      overflow: auto;
    }
    .timeline {
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #ddd;
      background: #fafbfc;
      /* This establishes the “tall rectangle” */
      height: var(--page-h);
      position: relative;
    }
    .reign {
      position: relative;
      width: 100%;
      border-bottom: 1px solid #e5e7eb;
      box-sizing: border-box;
      padding: 2px 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 10px; /* small but readable */
      line-height: 1.25;
      overflow: hidden;
    }
    .reign:nth-child(odd){
      background: #f4f6f9;
    }
    .reign:nth-child(even){
      background: #eef1f6;
    }
    .reign .years {
      display: inline-block;
      white-space: pre-line; /* allows our two-line years to wrap as specified */
      font-variant-numeric: tabular-nums;
      font-weight: 600;
    }
    .reign .name {
      position: absolute;
      left: 4px;
      right: 4px;
      top: 2px;
      font-weight: 500;
      font-size: 9px;
      opacity: 0.55;
      pointer-events: none;
    }
    /* Right content column (placeholder for the game area) */
    .main {
      padding: 16px;
    }
    .card {
      background: #fff;
      border: 1px solid #e8e8ee;
      border-radius: 8px;
      padding: 12px;
      max-width: 900px;
      margin: 0 0 16px 0;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      margin-bottom: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }
    th, td {
      padding: 6px 8px;
      border-bottom: 1px solid #eee;
      text-align: left;
      font-variant-numeric: tabular-nums;
    }
    th { background: #fafafa; }
    .foot {
      font-size: 11px;
      color: #666;
      margin-top: 6px;
    }
    @media (max-width: 700px){
      :root{ --sidebar-w: 140px; --page-h: 1800px; }
      .reign { font-size: 9px; }
      .reign .name { font-size: 8px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Monarchs of England & Britain — Learning Timeline</h1>
      <p>Starting with William the Conqueror. Left: proportional reign blocks with two-line year labels.</p>
    </header>

    <div class="timeline-wrap">
      <div id="timeline" class="timeline" aria-label="Monarch timeline (proportional by reign length)"></div>
    </div>

    <main class="main">
      <div class="card">
        <details open>
          <summary>Monarch Data (accession &amp; end years)</summary>
          <div id="data-table"></div>
          <div class="foot">Note: For this first version we’re using years (not exact days) and splitting the Wars of the Roses into distinct reigns.</div>
        </details>
        <p>This is the scaffolding for the game. Next steps will add the interactive guessing flow and hints.</p>
      </div>
    </main>
  </div>

  <script>
    // Minimal dataset with start and end YEARS and display names.
    // Multiple reigns are split (e.g., Henry VI first reign and restoration).
    const monarchs = [
      { name: "William I (the Conqueror)", start: 1066, end: 1087 },
      { name: "William II (Rufus)", start: 1087, end: 1100 },
      { name: "Henry I", start: 1100, end: 1135 },
      { name: "Stephen", start: 1135, end: 1154 },
      { name: "Henry II", start: 1154, end: 1189 },
      { name: "Richard I (the Lionheart)", start: 1189, end: 1199 },
      { name: "John", start: 1199, end: 1216 },
      { name: "Henry III", start: 1216, end: 1272 },
      { name: "Edward I", start: 1272, end: 1307 },
      { name: "Edward II", start: 1307, end: 1327 },
      { name: "Edward III", start: 1327, end: 1377 },
      { name: "Richard II", start: 1377, end: 1399 },
      { name: "Henry IV", start: 1399, end: 1413 },
      { name: "Henry V", start: 1413, end: 1422 },
      { name: "Henry VI (first reign)", start: 1422, end: 1461 },
      { name: "Edward IV (first reign)", start: 1461, end: 1470 },
      { name: "Henry VI (restored)", start: 1470, end: 1471 },
      { name: "Edward IV (restored)", start: 1471, end: 1483 },
      { name: "Edward V", start: 1483, end: 1483 },
      { name: "Richard III", start: 1483, end: 1485 },
      { name: "Henry VII", start: 1485, end: 1509 },
      { name: "Henry VIII", start: 1509, end: 1547 },
      { name: "Edward VI", start: 1547, end: 1553 },
      { name: "Mary I", start: 1553, end: 1558 },
      { name: "Elizabeth I", start: 1558, end: 1603 },
      { name: "James I (VI of Scotland)", start: 1603, end: 1625 },
      { name: "Charles I", start: 1625, end: 1649 },
      // Interregnum (Commonwealth & Protectorate) 1649–1660 intentionally omitted from monarch blocks
      { name: "Charles II", start: 1660, end: 1685 },
      { name: "James II", start: 1685, end: 1688 },
      { name: "William III & Mary II (joint)", start: 1689, end: 1694 },
      { name: "William III (solo)", start: 1694, end: 1702 },
      { name: "Anne", start: 1702, end: 1714 },
      { name: "George I", start: 1714, end: 1727 },
      { name: "George II", start: 1727, end: 1760 },
      { name: "George III", start: 1760, end: 1820 },
      { name: "George IV", start: 1820, end: 1830 },
      { name: "William IV", start: 1830, end: 1837 },
      { name: "Victoria", start: 1837, end: 1901 },
      { name: "Edward VII", start: 1901, end: 1910 },
      { name: "George V", start: 1910, end: 1936 },
      { name: "Edward VIII", start: 1936, end: 1936 },
      { name: "George VI", start: 1936, end: 1952 },
      { name: "Elizabeth II", start: 1952, end: 2022 },
      { name: "Charles III", start: 2022, end: null }
    ];

    // Compute the total span for proportional sizing.
    // Use earliest start and the latest known end (or current year) as the bounds.
    const now = new Date();
    const currentYear = now.getFullYear();
    const earliest = Math.min(...monarchs.map(m => m.start));
    const latest = Math.max(...monarchs.map(m => (m.end ?? currentYear)));
    const totalYears = latest - earliest;

    // Build timeline
    const timelineEl = document.getElementById('timeline');
    const timelineHeight = parseFloat(getComputedStyle(timelineEl).height);
    const pxPerYear = timelineHeight / totalYears;
    const minReignHeight = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--min-reign-h'));

    monarchs.forEach(m => {
      const start = m.start;
      const end = (m.end ?? currentYear);
      const years = Math.max(1, end - start || 1); // at least 1 year for zero-length (same-year) reigns

      const block = document.createElement('div');
      block.className = 'reign';
      const h = Math.max(minReignHeight, years * pxPerYear);
      block.style.height = h + 'px';

      const name = document.createElement('div');
      name.className = 'name';
      name.textContent = m.name;
      block.appendChild(name);

      const label = document.createElement('div');
      label.className = 'years';
      // First line: start year and a dash; Second line: end year if applicable (else blank)
      const endText = (m.end === null) ? "" : String(m.end);
      label.textContent = `${m.start}–\n${endText}`;
      block.appendChild(label);

      timelineEl.appendChild(block);
    });

    // Build data table
    function buildTable(){
      const wrap = document.getElementById('data-table');
      const tbl = document.createElement('table');
      const thead = document.createElement('thead');
      const trh = document.createElement('tr');
      ["Monarch", "Start (Year)", "End (Year)"].forEach(h => {
        const th = document.createElement('th');
        th.textContent = h;
        trh.appendChild(th);
      });
      thead.appendChild(trh);
      tbl.appendChild(thead);

      const tbody = document.createElement('tbody');
      monarchs.forEach(m => {
        const tr = document.createElement('tr');
        const tds = [
          m.name,
          String(m.start),
          (m.end === null ? "—" : String(m.end))
        ];
        tds.forEach(txt => {
          const td = document.createElement('td');
          td.textContent = txt;
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
      tbl.appendChild(tbody);
      wrap.innerHTML = "";
      wrap.appendChild(tbl);
    }
    buildTable();
  </script>
</body>
</html>
